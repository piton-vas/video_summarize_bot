# ๐ฅ Telegram ะะพั ะดะปั ะะฐััะธััะพะฒะบะธ ะะธะดะตะพ (ะะธะบัะพัะตัะฒะธัะฝะฐั ะััะธัะตะบัััะฐ)

ะััะพะบะพะฟัะพะธะทะฒะพะดะธัะตะปัะฝัะน ะฑะพั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัะฐััะธััะพะฒะบะธ ะฒะธะดะตะพ ะธ ะฐัะดะธะพ ัะฐะนะปะพะฒ ั ะฟะพะผะพััั ะธัะบััััะฒะตะฝะฝะพะณะพ ะธะฝัะตะปะปะตะบัะฐ. ะะพัััะพะตะฝ ะฝะฐ ะผะธะบัะพัะตัะฒะธัะฝะพะน ะฐััะธัะตะบัััะต ั Redis ะดะปั ะผะฐัััะฐะฑะธััะตะผะพััะธ ะธ ะพัะบะฐะทะพัััะพะนัะธะฒะพััะธ.

## โจ ะะพะทะผะพะถะฝะพััะธ

### ๐ฏ ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ
- ๐น ะะพะดะดะตัะถะบะฐ ะฒะธะดะตะพ ัะพัะผะฐัะพะฒ: MP4, AVI, MOV, MKV, WMV
- ๐ต ะะพะดะดะตัะถะบะฐ ะฐัะดะธะพ ัะพัะผะฐัะพะฒ: MP3, WAV, M4A, OGG, FLAC
- ๐ค ะะฒัะพะผะฐัะธัะตัะบะฐั ัะฐััะธััะพะฒะบะฐ ั ะฟะพะผะพััั Whisper AI
- ๐ ะะตะฝะตัะฐัะธั ะบัะฐัะบะพะณะพ ัะพะดะตัะถะฐะฝะธั
- โฐ ะกะพะทะดะฐะฝะธะต ัะฐะนะผะบะพะดะพะฒ ะดะปั ัะดะพะฑะฝะพะน ะฝะฐะฒะธะณะฐัะธะธ
- ๐ ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัััะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ

### ๐๏ธ ะััะธัะตะบัััะฝัะต ะฟัะตะธะผััะตััะฒะฐ
- ๐ **ะะฐัััะฐะฑะธััะตะผะพััั**: ะะตัะบะพะปัะบะพ ะฒะพัะบะตัะพะฒ ะดะปั ะฟะฐัะฐะปะปะตะปัะฝะพะน ะพะฑัะฐะฑะพัะบะธ
- ๐ก๏ธ **ะัะบะฐะทะพัััะพะนัะธะฒะพััั**: ะะทะพะปะธัะพะฒะฐะฝะฝัะต ะบะพะฝัะตะนะฝะตัั, ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต ะฟะพัะปะต ัะฑะพะตะฒ
- โก **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั**: ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ัะตัะตะท Redis Queue
- ๐ **ะะพะฝะธัะพัะธะฝะณ**: ะัััะพะตะฝะฝะฐั ัะธััะตะผะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะพัะตัะตะดะตะน
- ๐ **ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต**: Watchtower ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะพะฑะฝะพะฒะปะตะฝะธั

## ๐๏ธ ะััะธัะตะบัััะฐ ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ  Telegram Bot   โ    โ     Redis       โ    โ Video Workers   โ
โ                 โ    โ                 โ    โ                 โ
โ โข ะัะธะฝะธะผะฐะตั     โโโโโบโ โข ะัะตัะตะดะธ ะทะฐะดะฐั โโโโโบโ โข ะะฑัะฐะฑะพัะบะฐ     โ
โ   ัะฐะนะปั         โ    โ โข ะกัะฐััั ะทะฐะดะฐั  โ    โ   ะฒะธะดะตะพ/ะฐัะดะธะพ   โ
โ โข ะะพะฝะธัะพัะธะฝะณ    โ    โ โข ะะตะทัะปััะฐัั    โ    โ โข Whisper AI    โ
โ โข ะฃะฒะตะดะพะผะปะตะฝะธั   โ    โ                 โ    โ โข ะะฐัััะฐะฑะธััะตัััโ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

### ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั:
1. **Telegram Bot** - ะัะธะฝะธะผะฐะตั ัะฐะนะปั ะธ ัะฟัะฐะฒะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
2. **Redis** - ะัะตัะตะดะธ ะทะฐะดะฐั ะธ ััะฐะฝะตะฝะธะต ัะพััะพัะฝะธะน
3. **Video Workers** - ะะฑัะฐะฑะพัะบะฐ ะฒะธะดะตะพ/ะฐัะดะธะพ ัะฐะนะปะพะฒ
4. **Shared Storage** - ะัะตะผะตะฝะฝัะต ัะฐะนะปั ะผะตะถะดั ะบะพะฝัะตะนะฝะตัะฐะผะธ
5. **Watchtower** - ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต

## ๐ ะัััััะน ััะฐัั

### 1. ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั
- Docker & Docker Compose
- ะะธะฝะธะผัะผ 4 ะะ RAM
- 2 ะะ ัะฒะพะฑะพะดะฝะพะณะพ ะผะตััะฐ

### 2. ะะฐัััะพะนะบะฐ
```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone <your-repo-url>
cd video_summarize_bot

# ะกะพะทะดะฐะนัะต ัะฐะนะป .env
echo "BOT_TOKEN=your_bot_token_here" > .env
echo "ADMIN_USER_ID=your_admin_user_id" >> .env
```

### 3. ะะฐะฟััะบ ะผะธะบัะพัะตัะฒะธัะฝะพะน ะฐััะธัะตะบัััั
```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose -f docker-compose.microservices.yml up -d

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker-compose -f docker-compose.microservices.yml ps

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose -f docker-compose.microservices.yml logs -f
```

### 4. ะะพะฝะธัะพัะธะฝะณ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```bash
# ะะฐะฟััะบ ั ะผะพะฝะธัะพัะธะฝะณะพะผ Redis
docker-compose -f docker-compose.microservices.yml --profile monitoring up -d

# Redis Commander ะฑัะดะตั ะดะพัััะฟะตะฝ ะฝะฐ http://localhost:8081
```

## ๐ฏ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

1. **ะะฐะนะดะธัะต ะฑะพัะฐ** ะฒ Telegram ะฟะพ ัะพะบะตะฝั
2. **ะัะฟัะฐะฒััะต** ะบะพะผะฐะฝะดั `/start`
3. **ะะฐะณััะทะธัะต** ะฒะธะดะตะพ ะธะปะธ ะฐัะดะธะพ ัะฐะนะป
4. **ะััะปะตะถะธะฒะฐะนัะต** ััะฐััั ะพะฑัะฐะฑะพัะบะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
5. **ะะพะปััะธัะต** ัะฐััะธััะพะฒะบั ะธ ะบัะฐัะบะพะต ัะพะดะตัะถะฐะฝะธะต

## ๐ ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะัะธะฒะตัััะฒะธะต ะธ ะธะฝััััะบัะธะธ
- `/help` - ะะพะดัะพะฑะฝะฐั ัะฟัะฐะฒะบะฐ
- `/ping` - ะัะพะฒะตัะบะฐ ัะฐะฑะพัั ะฑะพัะฐ
- `/status` - ะกัะฐััั ัะธััะตะผั (ะพัะตัะตะดั, ะฒะพัะบะตัั, Redis)

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
```bash
# ะัะฝะพะฒะฝัะต ะฝะฐัััะพะนะบะธ
BOT_TOKEN=your_bot_token_here
ADMIN_USER_ID=your_admin_user_id

# Redis ะฝะฐัััะพะนะบะธ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ะะฒัะพะพะฑะฝะพะฒะปะตะฝะธะต (ะพะฟัะธะพะฝะฐะปัะฝะพ)
REPO_USER=your_github_username
REPO_PASS=your_github_token
```

### ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะฒะพัะบะตัะพะฒ
```bash
# ะะทะผะตะฝะธัั ะบะพะปะธัะตััะฒะพ ะฒะพัะบะตัะพะฒ
docker-compose -f docker-compose.microservices.yml up -d --scale video-worker=4
```

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```
video_summarize_bot/
โโโ main.py                          # ะัะฝะพะฒะฝะพะน ะฑะพั
โโโ worker.py                        # ะะพัะบะตั ะดะปั ะพะฑัะฐะฑะพัะบะธ
โโโ decryptor.py                     # ะะพะณะธะบะฐ ัะฐััะธััะพะฒะบะธ
โโโ requirements.txt                 # ะะฐะฒะธัะธะผะพััะธ
โโโ Dockerfile                       # ะะพะฝัะตะนะฝะตั ะฑะพัะฐ
โโโ Dockerfile.worker                # ะะพะฝัะตะนะฝะตั ะฒะพัะบะตัะฐ
โโโ docker-compose.microservices.yml # ะะธะบัะพัะตัะฒะธัะฝะฐั ะฐััะธัะตะบัััะฐ
โโโ docker-compose.prod-auto.yml     # ะกัะฐัะฐั ะผะพะฝะพะปะธัะฝะฐั ะฒะตััะธั
โโโ README.md                        # ะะพะบัะผะตะฝัะฐัะธั
```

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt

# ะะฐะฟััะบ Redis ะปะพะบะฐะปัะฝะพ
docker run -d -p 6379:6379 redis:7-alpine

# ะะฐะฟััะบ ะฑะพัะฐ
python main.py

# ะะฐะฟััะบ ะฒะพัะบะตัะฐ (ะฒ ะพัะดะตะปัะฝะพะผ ัะตัะผะธะฝะฐะปะต)
python worker.py
```

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

### ะัะพัะผะพัั ะปะพะณะพะฒ
```bash
# ะัะต ัะตัะฒะธัั
docker-compose -f docker-compose.microservices.yml logs -f

# ะะพะฝะบัะตัะฝัะน ัะตัะฒะธั
docker-compose -f docker-compose.microservices.yml logs -f telegram-bot
docker-compose -f docker-compose.microservices.yml logs -f video-worker
```

### ะะพะฝะธัะพัะธะฝะณ Redis
```bash
# ะะพะดะบะปััะตะฝะธะต ะบ Redis CLI
docker exec -it video_bot_redis redis-cli

# ะัะพัะผะพัั ะพัะตัะตะดะตะน
> KEYS *
> LLEN video_processing

# ะกัะฐัะธััะธะบะฐ
> INFO stats
```

## ๐ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะัะพะฑะปะตะผั ั Redis
```bash
# ะัะพะฒะตัะบะฐ ะฟะพะดะบะปััะตะฝะธั
docker exec -it video_bot_redis redis-cli ping

# ะัะธััะบะฐ ะพัะตัะตะดะตะน
docker exec -it video_bot_redis redis-cli FLUSHALL
```

### ะัะพะฑะปะตะผั ั ะฒะพัะบะตัะฐะผะธ
```bash
# ะะตัะตะทะฐะฟััะบ ะฒะพัะบะตัะพะฒ
docker-compose -f docker-compose.microservices.yml restart video-worker

# ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต
docker-compose -f docker-compose.microservices.yml up -d --scale video-worker=1
```

### ะัะพะฑะปะตะผั ั ะฟะฐะผัััั
```bash
# ะะพะฝะธัะพัะธะฝะณ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
docker stats

# ะะณัะฐะฝะธัะตะฝะธะต ะฟะฐะผััะธ ะดะปั ะฒะพัะบะตัะพะฒ
# ะะพะฑะฐะฒััะต ะฒ docker-compose.yml:
# mem_limit: 2g
# mem_reservation: 1g
```

## ๐ ะะธะณัะฐัะธั ั ะผะพะฝะพะปะธัะฝะพะน ะฐััะธัะตะบัััั

ะัะปะธ ั ะฒะฐั ะฑัะปะฐ ะทะฐะฟััะตะฝะฐ ััะฐัะฐั ะฒะตััะธั:

```bash
# ะััะฐะฝะพะฒะธัะต ััะฐััั ะฒะตััะธั
docker-compose -f docker-compose.prod-auto.yml down

# ะะฐะฟัััะธัะต ะฝะพะฒัั ะผะธะบัะพัะตัะฒะธัะฝัั
docker-compose -f docker-compose.microservices.yml up -d
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะตะบะพะผะตะฝะดัะตะผัะต ะฝะฐัััะพะนะบะธ:
- **2-4 ะฒะพัะบะตัะฐ** ะดะปั ะพะฑััะฝะพะน ะฝะฐะณััะทะบะธ
- **4-8 ะฒะพัะบะตัะพะฒ** ะดะปั ะฒััะพะบะพะน ะฝะฐะณััะทะบะธ
- **ะะธะฝะธะผัะผ 4 ะะ RAM** ะดะปั ัะธััะตะผั
- **SSD ะดะธัะบ** ะดะปั ะฑััััะพะน ะพะฑัะฐะฑะพัะบะธ

### ะะณัะฐะฝะธัะตะฝะธั:
- ะะฐะบัะธะผะฐะปัะฝัะน ัะฐะทะผะตั ัะฐะนะปะฐ: 20 ะะ
- ะะฐะบัะธะผะฐะปัะฝะฐั ะดะปะธัะตะปัะฝะพััั: 10 ะผะธะฝัั
- ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะทัะบะธ: ััััะบะธะน, ะฐะฝะณะปะธะนัะบะธะน

## ๐ ะะธัะตะฝะทะธั

ะัะพะตะบั ัะพะทะดะฐะฝ ะดะปั ะปะธัะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

## ๐ค ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:
1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs`
2. ะฃะฑะตะดะธัะตัั, ััะพ Redis ัะฐะฑะพัะฐะตั
3. ะัะพะฒะตัััะต ััะฐััั ะฒะพัะบะตัะพะฒ
4. ะกะพะทะดะฐะนัะต Issue ะฒ ัะตะฟะพะทะธัะพัะธะธ 